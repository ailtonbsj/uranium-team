clc
%Dados Brutos da Camera
entrada = [0,0,0,0,0,9,8548,9219,10134,11058,11642,12207,9919,6512,6657,6723,9097,15395,16605,16755,17306,17430,17867,18216,18590,18861,19108,19115,19805,19904,20090,19834,20027,20494,20522,20415,21419,21386,21611,21963,22343,22239,22487,22668,22880,22560,22801,23110,23415,23216,23684,23442,23656,23096,22455,23082,23287,23231,23567,23095,23551,23479,23841,23617,23386,23260,23521,23437,23769,23491,23523,23455,23650,23452,23762,23671,23583,23467,23827,23258,23643,23168,23733,23671,23623,23250,23251,23232,23107,23061,23091,22861,23091,22726,22697,22495,21854,21911,21875,21389,20977,20747,20750,20547,20485,20114,20033,19969,20032,19295,19259,18570,18357,17820,17742,14830,8428,7532,7531,8382,13884,14050,13207,12640,11893,10864,9875,8996,0]
%entrada = [0,0,0,0,0,12,6649,7467,8498,9445,10272,10988,11245,10241,9187,7931,7747,9544,12191,14517,16643,17451,17950,18279,18698,19057,19414,19739,20106,20123,20490,20574,20986,21512,21338,21147,22043,21774,22251,22662,23056,22934,23251,23544,23786,23551,23789,24022,24169,24042,24535,24359,24515,24429,23680,24339,24444,24517,24767,24337,24877,24823,25149,24954,24821,24256,24458,24247,24553,24345,24422,24276,24486,24263,24622,24574,24403,24383,24703,24114,24411,23809,24096,24017,24167,24002,23862,24011,23778,23816,24007,23929,24027,23649,23547,23486,22979,23074,22990,22565,22097,21973,21778,21599,21441,20959,20694,20507,20467,19768,19747,19078,18788,17865,16103,13207,10355,8149,8719,9904,11563,12496,11917,11235,10347,9088,8342,7008,0]
%entrada = [0,0,0,0,0,9,8685,9307,10219,11008,11618,12194,12611,8851,7115,7043,7371,11107,15646,16025,16618,16690,16990,17327,17386,17571,17891,18145,18639,18736,19068,18976,19091,19551,19545,19447,20329,19968,20309,20694,20955,20866,21142,21314,21653,21427,21595,21873,22018,21826,22242,22014,22186,21979,21530,21979,22130,22230,22366,21754,22398,22235,22642,22563,22587,22538,22623,22506,22762,22381,22492,22431,22653,22371,22871,22906,22690,22530,22866,22440,22727,22382,22819,22698,22858,22582,22355,22413,22041,21971,21895,21888,22256,21843,21574,21415,20794,20930,20844,20485,20022,20162,20155,20167,20054,19596,19489,19282,19288,18739,18819,18146,17907,17461,17184,11712,7632,7163,7222,10210,14933,14555,13711,13136,12446,11311,10534,9618,0]
%entrada = [0,0,0,0,0,0,10404,9893,9567,8936,8658,8787,9302,10031,11419,12347,13544,14256,14717,14800,15208,15234,15577,15621,15941,16035,16224,16327,16733,16741,16945,16941,17145,17491,17558,17240,18045,17884,18170,18419,18701,18547,18765,18986,19236,19086,19301,19549,19726,19520,19864,19651,19813,19676,19249,19671,20412,20522,20701,20219,20683,20558,20844,20663,20749,20680,20905,20619,20922,20577,20743,20638,20866,20677,21058,20972,20901,20805,21099,20672,20929,20538,20942,20747,20880,20762,20634,20683,20409,20374,20322,20126,20163,19802,19837,19722,19212,19338,19387,19042,18679,18597,18480,18396,18334,17877,17866,17796,17914,17417,17544,17051,17002,16847,16826,16004,15074,13713,12704,11282,10387,9727,9594,10011,11095,11682,12518,12492,0]
%entrada = [0,0,0,0,0,15,9454,10174,11198,12147,12909,13734,14614,15239,16077,16566,17355,18014,18371,18494,18810,19071,19523,19772,20211,20415,20726,20866,21316,21419,21839,21939,22222,22688,22619,22360,23115,22971,23300,23563,23763,23603,23849,24127,24321,24003,24206,24494,24622,24483,24855,24480,24435,23887,23483,24318,24374,24530,23997,23158,23931,24403,24778,24143,23536,23391,24078,24811,25334,25076,24705,24448,24935,24866,25155,25035,25259,25115,25508,24827,25173,24695,24940,24727,24559,24094,24227,23895,23903,23431,23888,24391,24260,22808,22858,23202,22383,22052,21925,21440,22206,21459,21025,21286,21268,20791,20668,20577,20551,19864,19809,19206,19021,18760,18681,17887,17734,16904,16791,16139,15522,14696,13779,13170,12439,11318,10691,9459,0]
%entrada = [0,0,0,0,0,2,7150,7810,8859,9720,10502,11157,11814,12500,13004,11024,7866,6502,7199,10668,15217,16479,17356,17706,18013,18211,18413,18601,18983,19094,19350,19256,19488,20032,20002,19858,20715,20643,21034,21222,21281,21489,21791,22050,22363,22090,22355,22563,22701,22533,22918,22577,22799,22826,22303,22907,23127,23133,23351,22929,23299,23122,23369,22910,22625,22254,22398,21738,21863,21822,21981,21763,21803,21363,21726,21582,21450,21208,21412,20984,21400,21095,21539,21442,21663,21650,21670,21858,21737,21775,21848,21831,21869,21594,21663,21600,21061,21099,21026,20675,20466,20359,20266,20210,20019,19516,19200,17124,12302,8336,7906,10039,14587,17417,17818,17067,16813,16071,15915,15155,14504,13756,12823,12224,11483,10234,9422,8265,0]
%entrada = [0,0,0,0,0,80,5079,4567,5175,7664,10557,11754,12623,13310,14187,14666,15459,16024,16283,16875,17342,17423,17775,17921,18247,18475,18866,19107,19538,19768,20176,20004,20064,20267,19994,19497,19902,19462,19702,19979,20391,20939,21700,22446,22933,22835,22944,23342,23445,23208,23547,23323,23359,23013,22411,22914,22858,22983,23311,22810,23170,23063,23429,23057,23193,23000,23119,22658,23139,23258,23443,23379,23807,23719,24123,24069,23984,23886,24265,23801,24245,23869,24298,24089,24115,23907,23685,23825,23659,23761,23902,23699,23612,23127,23021,22737,19435,13771,9744,8814,10950,16191,20295,21241,21071,20517,20328,20109,20087,19464,19644,19012,18999,18705,18475,17683,17401,16468,16148,15305,14619,13779,12866,12176,11447,10316,9492,8307,0]
%entrada = [0,0,0,0,0,16,7408,8130,9000,9727,10392,11279,12135,12875,13534,13733,14287,14738,14977,15633,16323,16935,17633,18064,18499,18706,18938,18965,19499,19823,20227,20201,20371,20674,20642,20412,21237,21315,21841,22088,22072,22039,22319,22808,23067,23036,23351,23732,23944,23790,24306,24015,24222,24087,23475,24121,24409,24449,24751,24286,24796,24677,24813,24481,24349,24506,24659,24103,24469,24387,24423,24126,24286,23575,19056,12657,9916,9739,12456,18221,23521,24264,24511,24306,24371,24286,24151,24407,24358,24318,24327,24088,24011,23503,23408,23286,22734,22796,22849,22552,22053,21871,21414,20947,20673,20054,19765,19661,19623,18768,18795,18180,18205,18023,17511,14461,12278,10866,9879,8716,7967,7415,7362,7189,6998,6473,6074,5548,0]
%entrada = [0,0,0,0,0,32,7138,7950,9044,9834,10613,11361,12143,12751,13542,13874,14565,15080,15379,15985,16470,16453,16932,17100,15395,11081,7877,7615,10192,15095,19214,19782,20216,20571,20503,20295,21130,20808,21274,21425,21537,21591,21829,21998,22151,21735,21916,22283,22571,22271,22729,22662,22826,22437,21607,21955,21802,21550,21504,20749,20942,20772,21155,21391,21818,22359,22851,22564,22992,22883,23042,22838,22913,22469,22891,23034,22966,22693,22871,22177,22472,22019,22334,22317,22601,22609,22509,22553,22431,22607,22766,22666,22724,22352,22325,22368,21837,21971,22115,21747,21399,21323,21153,20995,20792,20250,20079,19890,19863,19169,19251,18647,18507,18054,18010,17278,16397,12419,8298,6759,7578,10196,12225,12035,11306,10226,9570,8341,0]
%entrada = [0,0,0,0,0,14,4430,4513,5048,5356,6146,6748,7492,9256,11747,13334,14435,15075,15507,16226,16850,16906,17372,17591,17993,18137,18395,18655,19055,18950,19346,19442,19601,19786,19779,19583,18275,13246,9138,8430,10118,14904,20526,22373,22842,22590,22671,22859,22978,22775,23105,22949,23131,22999,22298,22970,23012,23109,23185,22719,23291,23279,23570,23415,23533,23581,23698,22841,22925,22573,22499,21993,21859,21332,21504,21322,21368,21633,22471,22423,23131,22815,23314,23089,23124,22856,22635,22745,22764,22855,22724,22366,22245,21655,21578,21439,21039,21290,21487,21408,21165,21129,20947,20807,20643,20237,20094,19941,19907,19411,19632,19125,19087,18808,18704,17824,17419,16449,16144,15400,14819,13897,12928,12374,11695,10503,9666,8463,0]

%corte
corte = 5;
entrada1 = entrada(1+corte:129-corte)

%Vetor de Saida
saida = zeros(1,length(entrada1))
saida2 = zeros(1,length(entrada1))

%Processamento (Derivada)
for i=2:(length(entrada1)-1)
    saida(i-1) = int16((entrada1(i+1)-entrada1(i-1))/2);
end
for i=1:(length(entrada1)-1)
    saida2(i) = abs(entrada1(i+1)-entrada1(i));
end
saida(1) = 0;
saida(2)=4500;
saida((length(entrada1)-2)) = 0;
saida((length(entrada1)-1))=4500;
saida2(1) = 0;
saida2(2)=4500;
saida2((length(entrada1)-2)) = 0;
saida2((length(entrada1)-1))=4500;


maxi = max(saida)
mini = min(saida)
media = (maxi-mini)/2

%Plotagem Entrada e Saida
subplot(2,1,1);
plot(entrada1,'-r','LineWidth',1.5);
hold on
plot([0,length(saida)],[media,media],'-r','LineWidth',1);
subplot(2,1,2);
plot(saida,'-b','LineWidth',1.5);
hold on
plot([0,length(saida)],[media,media],'-r','LineWidth',1);